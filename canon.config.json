{
  "name": "Speedwell",
  "generatedFiles": [
    { "path": "_data/_blog.json", "command": "npm run blog", "trigger": "Adding/editing posts in src/blog/" },
    { "path": "_data/_studio.json", "command": "Gallop Studio UI", "trigger": "Never edit — image optimization metadata" },
    { "path": "_data/_meta.json", "command": "npm run blocks", "trigger": "Block catalog changes" },
    { "path": "src/app/BLOCKS.md", "command": "npm run blocks", "trigger": "Block additions (tier/order preserved)" },
    { "path": "src/app/README.md", "command": "npm run layouts", "trigger": "Layout additions" },
    { "path": "public/search-index.json", "command": "npm run search", "trigger": "Content changes" },
    { "path": "public/blocks/*.jpg", "command": "npm run blocks:screenshots", "trigger": "Block visual changes" },
    { "path": "public/layouts/*.jpg", "command": "npm run layouts:screenshots", "trigger": "Layout visual changes" },
    { "path": ".cursorrules", "command": "npm run generate:ai-rules", "trigger": "Canon rule changes" }
  ],
  "buildCommands": [
    { "script": "npm run dev", "description": "Development server" },
    { "script": "npm run build", "description": "Production build (auto-runs npm run blog)" },
    { "script": "npm run blog", "description": "Regenerate blog metadata" },
    { "script": "npm run blocks", "description": "Regenerate blocks catalog" },
    { "script": "npm run search", "description": "Regenerate search index" },
    { "script": "npm run lint", "description": "ESLint check (run after edits)" },
    { "script": "npm run ts", "description": "TypeScript check" },
    { "script": "npm run check", "description": "lint + ts combined" },
    { "script": "npm run prettier", "description": "Format code" }
  ],
  "colorTokens": {
    "surface": ["body", "body-light", "body-dark", "body2"],
    "text": ["contrast", "contrast-light", "contrast-dark"],
    "overlay": ["overlay", "overlay-text"],
    "accents": ["accent", "accent-light", "accent-dark", "accent-contrast", "accent2", "accent2-light", "accent2-dark", "accent2-contrast", "accent3", "accent3-light", "accent3-dark", "accent3-contrast", "accent4", "accent4-light", "accent4-dark", "accent4-contrast", "accent5", "accent5-light", "accent5-dark", "accent5-contrast", "accent6", "accent6-light", "accent6-dark", "accent6-contrast"],
    "allowedRawClasses": []
  },
  "components": [
    { "name": "Heading", "props": ["as", "color", "margin", "fontSize", "fontWeight", "textAlign"], "notes": "h1/h4 default text-accent; h2/h3/h5/h6 default text-contrast" },
    { "name": "Paragraph", "props": ["color", "margin", "fontSize", "lineHeight", "textAlign"] },
    { "name": "Span", "props": ["color", "margin", "fontSize"], "notes": "Inline text, mb-0 default" },
    { "name": "Label", "props": ["color", "margin", "fontSize", "fontWeight", "textAlign"] },
    { "name": "Accent", "props": ["color", "margin", "size", "textAlign"], "notes": "Has conditional text-shadow when color='text-body'" },
    { "name": "Quote", "props": ["variant", "color", "margin", "fontSize", "fontWeight", "textAlign"] },
    { "name": "Section", "props": ["overlayColor"], "notes": "Wraps content with Container. Default overlay bg-overlay/30" },
    { "name": "Cover", "props": ["overlayColor"], "notes": "Full-height hero-style with image backgrounds" },
    { "name": "Columns", "props": ["cols", "gap", "align"] },
    { "name": "Column" },
    { "name": "Button", "props": ["href", "variant", "icon", "iconPlacement", "margin", "dark"], "notes": "dark prop flips light/dark variant class sets (render-time boolean, not CSS dark mode)" },
    { "name": "Icon", "notes": "Iconify icon wrapper. Always include sizing class (w-5 h-5)" },
    { "name": "Image", "props": ["size"], "notes": "Always use size prop ('small'|'medium'|'large'|'full'). Uses getStudioImage() from src/utils/studio-helpers.ts" }
  ],
  "state": {
    "library": "valtio",
    "file": "src/state.ts",
    "readPattern": "useSnapshot(state)",
    "writePattern": "state.propName = value",
    "properties": ["playVideo", "offsetTop", "windowHeight", "lastOffsetTop", "isScrolling", "dialogOpen", "scrollingDirection", "lastScrollingDirection", "lockScrollDirection"]
  },
  "rules": [
    { "type": "doNot", "rule": "Use gray-*, white, black, slate-* — always map to a semantic token" },
    { "type": "doNot", "rule": "Put text color in className when component has a color prop" },
    { "type": "doNot", "rule": "Manually construct image URLs when a _data/_studio.json metadata entry exists" },
    { "type": "doNot", "rule": "Manually edit files in _data/ (generated only)" },
    { "type": "do", "rule": "Use the color prop on typography components (Heading, Paragraph, Label, Span, Accent)" },
    { "type": "do", "rule": "Use props (fontSize, margin, fontWeight, textAlign) instead of className when a component prop exists" },
    { "type": "do", "rule": "Import icons from @iconify/icons-heroicons/ or @iconify/icons-lucide/" },
    { "type": "do", "rule": "Run npm run blog after editing blog posts in src/blog/" }
  ],
  "verification": [
    "npm run lint",
    "npm run ts"
  ]
}
